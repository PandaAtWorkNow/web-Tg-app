<!-- app/index.html -->
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ó–∞–ø–∏—Å—å</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root { --bg:#0f1b2d; --card:#16243a; --txt:#e8f0ff; --muted:#9bb0d1; }
    html,body {margin:0;height:100%;background:var(--bg);color:var(--txt);font-family:system-ui,Segoe UI,Roboto,Arial;}
    .wrap {max-width:520px;margin:0 auto;padding:20px;}
    .card {background:var(--card);border-radius:16px;padding:18px;box-shadow:0 6px 24px rgba(0,0,0,.25);}
    h1{font-size:18px;margin:0 0 12px;}
    label{display:block;margin:12px 0 6px;color:var(--muted);font-size:13px;}
    input,select,button{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #22324e;background:#0e1a2b;color:var(--txt);font-size:14px;outline:none;}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
    .spacer{height:12px;}
    .hint{font-size:12px;color:var(--muted);margin-top:8px;}
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>üóì –ó–∞–ø–∏—Å—å –Ω–∞ —É—Å–ª—É–≥—É</h1>
    <label>–î–∞—Ç–∞</label>
    <input id="date" type="date" min="" max=""/>
    <div class="row">
      <div>
        <label>–í—Ä–µ–º—è</label>
        <select id="time">
          <option>10:00</option><option>11:00</option><option>12:00</option>
          <option>14:00</option><option>15:00</option><option>16:00</option>
        </select>
      </div>
      <div>
        <label>–ú–∞—Å—Ç–µ—Ä</label>
        <select id="master">
          <option>–õ—é–±–æ–π</option><option>–ê–Ω–Ω–∞</option><option>–ú–∞—Ä–∏—è</option><option>–ï–ª–µ–Ω–∞</option>
        </select>
      </div>
    </div>
    <div class="spacer"></div>
    <div class="hint">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤–Ω–∏–∑—É, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–∞.</div>
  </div>
</div>

<script>
  const tg = window.Telegram.WebApp;
  tg.expand();                // –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ä–∞—Å–∫—Ä—ã—Ç—å
  tg.MainButton.setText("–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–ø–∏—Å—å");
  tg.MainButton.show();

  // –û–≥—Ä–∞–Ω–∏—á–∏–º –≤—ã–±–æ—Ä –¥–∞—Ç: —Å–µ–≥–æ–¥–Ω—è‚Ä¶+30 –¥–Ω–µ–π
  const today = new Date();
  const max = new Date(); max.setDate(today.getDate() + 30);
  const pad = n => String(n).padStart(2,'0');
  const toISO = d => `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;

  const inDate = document.getElementById('date');
  inDate.min = toISO(today);
  inDate.max = toISO(max);
  inDate.value = toISO(today);

  tg.onEvent('mainButtonClicked', () => {
    const payload = {
      action: "create_booking",
      date: inDate.value,
      time: document.getElementById('time').value,
      master: document.getElementById('master').value
    };
    tg.sendData(JSON.stringify(payload)); // —É–ª–µ—Ç–∏—Ç –≤ message.web_app_data.data
    tg.close(); // –ø–æ –∂–µ–ª–∞–Ω–∏—é: –∑–∞–∫—Ä—ã—Ç—å –º–∏–Ω–∏-–∞–ø–ø
  });

  // –¢—ë–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ñ–æ–Ω–æ–º WebApp
</script>
</body>
</html>
